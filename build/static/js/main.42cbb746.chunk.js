(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{140:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(32),r=a.n(s),i=a(83),o=a(84),j=a(92),l=a(91),u=a(10),d=a.n(u),b=a(17),x=a(9),h=a(21),O=a(11),m=a(149),p=a(148),f=a(143),v=a(150),g=a(61),y={apiKey:"AIzaSyBaIFCic3PdUDmvCIMNPdSNpBuap4gpE2o",authDomain:"rock-paper-scissors-onli-dc6c4.firebaseapp.com",projectId:"rock-paper-scissors-onli-dc6c4",storageBucket:"rock-paper-scissors-onli-dc6c4.appspot.com",messagingSenderId:"97204497145",appId:"1:97204497145:web:3dd9899fc51de2d9929028",measurementId:"G-7TP1KX6P4K"},w=(a(99),a(141),g.a.initializeApp(y)),N=w.auth(),k=g.a.firestore(),S=a(2),C=Object(c.createContext)(),D=function(){return Object(c.useContext)(C)},I=function(e){var t=e.children,a=Object(c.useState)(),n=Object(x.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(!0),o=Object(x.a)(i,2),j=o[0],l=o[1],u=function(){var e=Object(b.a)(d.a.mark((function e(t,a,c){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.createUserWithEmailAndPassword(t,c);case 2:return n=e.sent,e.next=5,k.collection("users").doc(n.user.uid).set({username:a,ranking:1e3,xp:0,matchesPlayed:[]});case 5:case"end":return e.stop()}}),e)})));return function(t,a,c){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){return N.onAuthStateChanged(function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,k.collection("users").doc(t.uid).get();case 3:a=e.sent,t.username=a.data().username;case 5:r(t),l(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var h={currentUser:s,signup:u,login:function(e,t){return N.signInWithEmailAndPassword(e,t)},signout:function(){return N.signOut()}};return Object(S.jsx)(C.Provider,{value:h,children:!j&&t})},P=function(){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(h.b,{to:"/login",children:Object(S.jsxs)(f.a,{variant:"primary",children:[Object(S.jsx)("i",{className:"far fa-user"})," Login"]})}),Object(S.jsx)(h.b,{to:"/signup",children:Object(S.jsxs)(f.a,{variant:"outline-primary",style:{marginLeft:"15px"},children:[Object(S.jsx)("i",{className:"far fa-edit"})," Sign Up"]})})]})},U=function(){var e=D(),t=e.currentUser,a=e.signout,n=Object(c.useState)(!1),s=Object(x.a)(n,2),r=s[0],i=s[1],o=Object(c.useState)(""),j=Object(x.a)(o,2),l=j[0],u=j[1],h=Object(O.g)(),m=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(""),i(!0),e.next=5,a();case 5:h.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u("Failed to sign out");case 11:i(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"d-flex align-items-center",children:[l&&Object(S.jsx)(v.a,{variant:"danger",children:l}),Object(S.jsx)("p",{className:"mx-3 my-auto",children:t.username}),Object(S.jsx)(f.a,{disabled:r,variant:"outline-primary",onClick:m,children:"Sign Out"})]})},B=function(){var e=D().currentUser;return Object(S.jsxs)(m.a,{bg:"light",expand:"md",style:{maxWidth:"1500px",borderRadius:"0 0 15px 15px"},className:"mx-auto shadow px-5",children:[Object(S.jsx)(m.a.Brand,{style:{minHeight:"100px"},className:"d-flex align-items-center",children:Object(S.jsx)(h.b,{to:"/",style:{textDecoration:"none",color:"black"},children:Object(S.jsxs)("p",{className:"text-title",children:[Object(S.jsx)("i",{className:"fas fa-signal",style:{color:"#0275d8",fontSize:17}})," Rock Paper Scissors Online"]})})}),Object(S.jsx)(m.a.Toggle,{"aria-controls":"navbar-nav"}),Object(S.jsx)(m.a.Collapse,{id:"navbar-nav",children:Object(S.jsx)(p.a,{className:"d-flex justify-content-end w-100",children:Object(S.jsx)("div",{className:"d-flex justify-content-end",children:e?Object(S.jsx)(U,{}):Object(S.jsx)(P,{})})})})]})},E=a(151),R=a(144),F=a(89),L=a(88),A=Object(c.createContext)(),G=function(){return Object(c.useContext)(A)},z=function(e){var t=e.children,a=Object(c.useState)(!1),n=Object(x.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(),o=Object(x.a)(i,2),j=o[0],l=o[1],u={connect:function(){return new Promise((function(e,t){var a=Object(L.io)("http://localhost:3030");a.on("connect",(function(){r(!0),l(a),e(a)})),a.on("connect_error",(function(){t()})),a.on("connect_timeout",(function(){t()})),a.on("disconnect",(function(){r(!1)}))}))},connected:s,socket:j};return Object(S.jsx)(A.Provider,{value:u,children:t})},q=a(50),H=a.n(q),M=function(e){return Object(S.jsx)("div",{style:{height:"100%",overflowY:"auto"},children:Object(S.jsx)("p",{children:"Data"})})},T=function(){return Object(S.jsx)("div",{className:"d-flex align-items-center justify-content-center w-100 h-100 p-5",style:{flexGrow:1},children:Object(S.jsx)("div",{className:"loader"})})},W=function(e){var t=Object(O.g)(),a=Object(c.useState)(!1),n=Object(x.a)(a,2),s=n[0],r=n[1],i=G(),o=i.connect,j=i.connected,l=i.socket,u=function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r(!0),j?h(l):o().then((function(e){h(e)}),(function(){e.setError("Failed to connect to server."),r(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(e){e.emit("create-match",(function(e){r(!1),t.push("/game/".concat(e))}))};return Object(S.jsxs)(f.a,{variant:"outline-primary",className:"w-100",onClick:u,disabled:s,children:[Object(S.jsx)("i",{className:"fas fa-plus"})," Create Match"]})},K=function(e){var t=D().currentUser,a=Object(c.useState)(""),n=Object(x.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)({}),o=Object(x.a)(i,2),j=o[0],l=o[1],u=Object(c.useState)(!0),h=Object(x.a)(u,2),O=h[0],m=h[1];return Object(c.useEffect)((function(){(function(){var t=Object(b.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.collection("users").doc(e.uid).get();case 2:a=t.sent,l(a.data()),m(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(S.jsxs)("div",{className:"w-100",children:[s&&Object(S.jsx)(v.a,{variant:"danger",className:"shadow",children:s}),Object(S.jsxs)(R.a,{children:[Object(S.jsx)(F.a,{md:9,className:"mb-3",children:Object(S.jsx)(E.a,{className:"content-card shadow",children:Object(S.jsx)(E.a.Body,{children:Object(S.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(S.jsx)("p",{className:"text-title",children:t.username}),Object(S.jsxs)("div",{className:"d-flex align-items-center text-title",children:[O?"----":Object(S.jsx)(H.a,{animateToNumber:j.ranking})," ",Object(S.jsx)("i",{className:"fas fa-trophy mx-1",style:{fontSize:16}})]})]})})})}),Object(S.jsx)(F.a,{className:"mb-3",children:Object(S.jsx)(E.a,{className:"content-card shadow",children:Object(S.jsx)(E.a.Body,{children:Object(S.jsx)("div",{className:"d-flex justify-content-end w-100",children:Object(S.jsx)(W,{setError:r})})})})})]}),Object(S.jsxs)(R.a,{className:"h-100",children:[Object(S.jsx)(F.a,{md:3,className:"h-100 mb-3",children:Object(S.jsx)(E.a,{className:"content-card shadow",style:{height:"500px"},children:Object(S.jsx)(E.a.Body,{children:Object(S.jsxs)("p",{className:"text-title",children:["Statistics ",Object(S.jsx)("i",{className:"fas fa-chart-pie",style:{fontSize:16}})]})})})}),Object(S.jsx)(F.a,{className:"mb-3",children:Object(S.jsx)(E.a,{className:"content-card shadow",style:{height:"500px"},children:Object(S.jsxs)(E.a.Body,{children:[Object(S.jsxs)("p",{className:"text-title",children:["Match History ",Object(S.jsx)("i",{className:"fas fa-history",style:{fontSize:16}})]}),O?Object(S.jsx)(T,{}):Object(S.jsx)(M,{userData:j})]})})})]})]})},J=function(){return Object(S.jsx)(E.a,{className:"shadow",style:{borderRadius:"15px",padding:"30px"},children:Object(S.jsxs)(E.a.Body,{children:[Object(S.jsx)("h2",{children:"Competitive RPS Action"}),Object(S.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(S.jsx)("p",{style:{width:"100%",textAlign:"right"},children:"filler text this is filler text i am filling up this space with text because i need it to look like there is actually something here please disregard what this actually says thank you."})})]})})},_=function(){var e=D().currentUser;return Object(S.jsx)("div",{className:"w-100 h-100",children:e?Object(S.jsx)(K,{uid:e.uid}):Object(S.jsx)(J,{})})},X=a(145),Y=a(90),Q=function(e){var t=e.matchData["player".concat(e.player,"Score")]>=e.number,a={backgroundColor:t?"#0275d8":"white",border:t?"none":"2px solid gray",borderRadius:"50%",width:"20px",height:"20px",margin:"0 5px"};return Object(S.jsx)("div",{style:a})},V=function(e){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[Object(S.jsx)("p",{className:"player-title",children:e.matchData.player1}),Object(S.jsx)("p",{className:"player-title",children:e.matchData.player2})]}),Object(S.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(S.jsxs)("div",{className:"d-flex",children:[Object(S.jsx)(Q,{number:1,player:1,matchData:e.matchData}),Object(S.jsx)(Q,{number:2,player:1,matchData:e.matchData}),Object(S.jsx)(Q,{number:3,player:1,matchData:e.matchData})]}),Object(S.jsxs)("div",{className:"d-flex",children:[Object(S.jsx)(Q,{number:1,player:2,matchData:e.matchData}),Object(S.jsx)(Q,{number:2,player:2,matchData:e.matchData}),Object(S.jsx)(Q,{number:3,player:2,matchData:e.matchData})]})]})]})},Z=function(e){var t={backgroundColor:e.colored.buttonId===e.buttonId?e.colored.shade:"#696969"};return Object(S.jsx)("button",{className:"game-button",style:t,id:e.buttonId,disabled:e.disabled,onClick:function(){return e.handleClick(e.buttonId)},children:Object(S.jsx)("i",{className:"far fa-hand-".concat(e.buttonId)})})},$=function(e){var t=Object(c.useState)({buttonId:"none",shade:"#696969"}),a=Object(x.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)("none"),i=Object(x.a)(r,2),o=i[0],j=i[1];Object(c.useEffect)((function(){var t=e.matchStatus;"between-rounds"===t.state?s({buttonId:o,shade:t.data.winner===e.currentUser.username?"green":"tie"===t.data.winner?"yellow":"red"}):"in-progress"===t.state&&s({buttonId:o,shade:"#0275d8"})}),[o,e.matchStatus]),Object(c.useEffect)((function(){"in-progress"===e.matchStatus.state&&(e.disableButtons(!1),j("none"))}),[e.matchStatus.state]);var l=function(t){e.socket.emit("send-move",e.currentUser.username,e.gameId,t),e.disableButtons(!0),j(t)};return Object(S.jsxs)("div",{className:"game-buttons",children:[Object(S.jsx)(Z,{disabled:e.disabled,handleClick:l,buttonId:"rock",colored:n}),Object(S.jsx)(Z,{disabled:e.disabled,handleClick:l,buttonId:"paper",colored:n}),Object(S.jsx)(Z,{disabled:e.disabled,handleClick:l,buttonId:"scissors",colored:n})]})},ee=function(e){return Object(S.jsx)(H.a,{animateToNumber:e.count})},te=function(e){return Object(S.jsxs)("p",{style:{fontSize:"40px",textAlign:"center"},children:[e.matchStatus.data.winner," wins!"]})},ae=function(){var e=Object(O.h)().gameId,t=D().currentUser,a=G(),n=a.connected,s=a.connect,r=a.socket,i=Object(c.useState)(!0),o=Object(x.a)(i,2),j=o[0],l=o[1],u=Object(c.useState)(!1),h=Object(x.a)(u,2),m=h[0],p=h[1],v=Object(c.useState)(),g=Object(x.a)(v,2),y=g[0],w=g[1],N=Object(c.useState)("waiting-for-players"),C=Object(x.a)(N,2),I=C[0],P=C[1],U=Object(O.g)(),B=Object(c.useRef)();Object(c.useEffect)((function(){return function(){var t=Object(b.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R();case 2:return a=t.sent,t.abrupt("return",(function(){a(),r.emit("leave-match",e)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[]);var R=function(){var a=Object(b.a)(d.a.mark((function a(){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=Object(b.a)(d.a.mark((function a(c,i){var o;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=r,n){a.next=5;break}return a.next=4,s();case 4:o=a.sent;case 5:o.emit("join-match",t,e,(function(t){if(t){var a=k.collection("active-matches").doc(e).onSnapshot((function(e){w(e.data()),P(e.data().status),l(!1)}));o.on("kick-match",(function(){a(),U.push("/")})),c(a)}else U.push("/")}));case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(S.jsx)(E.a,{className:"w-100 content-card shadow mb-5",children:Object(S.jsx)(E.a.Body,{className:"d-flex flex-column",style:{minHeight:"500px",boxSizing:"border-box"},children:j?Object(S.jsx)(T,{}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(V,{matchData:y}),Object(S.jsx)("div",{className:"d-flex justify-content-center align-items-center flex-column",style:{flexGrow:1},children:"waiting-for-players"===I.state?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("p",{children:"Waiting for players..."}),Object(S.jsxs)(X.a,{style:{width:"450px"},children:[Object(S.jsx)(Y.a,{value:window.location.href,readOnly:!0,ref:B}),Object(S.jsx)(f.a,{variant:"primary",onClick:function(){B.current.select(),B.current.setSelectionRange(0,99999),document.execCommand("copy")},children:Object(S.jsx)("i",{className:"fas fa-clipboard"})})]})]}):"starting"===I.state?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("p",{children:"Match starting in..."}),Object(S.jsx)(ee,{count:I.data.count})]}):"in-progress"===I.state||"between-rounds"===I.state?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)($,{disabled:m,socket:r,gameId:e,currentUser:t,disableButtons:p,matchStatus:I}),Object(S.jsx)(ee,{count:I.data.count})]}):"complete"===I.state?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(te,{matchStatus:I}),Object(S.jsx)(ee,{count:I.data.count})]}):Object(S.jsx)("div",{children:"uh oh"})})]})})})},ce=a(93),ne=function(e){var t=Object.assign({},e);return D().currentUser?Object(S.jsx)(O.b,Object(ce.a)({},t)):Object(S.jsx)(O.a,{to:"/login"})},se=a(147),re=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=Object(c.useRef)(),n=Object(c.useRef)(),s=D().signup,r=Object(O.g)(),i=Object(c.useState)(""),o=Object(x.a)(i,2),j=o[0],l=o[1],u=Object(c.useState)(!1),m=Object(x.a)(u,2),p=m[0],g=m[1],y=function(){var c=Object(b.a)(d.a.mark((function c(i){return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(i.preventDefault(),t.current.value===a.current.value){c.next=3;break}return c.abrupt("return",l("Passwords do not match."));case 3:if(!(n.current.value.length>16)){c.next=5;break}return c.abrupt("return",l("Username must be 16 characters or less."));case 5:return c.prev=5,l(""),g(!0),c.next=10,s(e.current.value,n.current.value,t.current.value);case 10:r.push("/"),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(5),l("Failed to create account.");case 16:g(!1);case 17:case"end":return c.stop()}}),c,null,[[5,13]])})));return function(e){return c.apply(this,arguments)}}();return Object(S.jsx)(E.a,{className:"shadow content-card card-2 mb-3",children:Object(S.jsxs)(E.a.Body,{children:[Object(S.jsx)("p",{className:"text-center mb-4 text-title",children:"Sign Up"}),j&&Object(S.jsx)(v.a,{variant:"danger",children:j}),Object(S.jsxs)(se.a,{className:"mb-4",onSubmit:y,children:[Object(S.jsxs)(se.a.Group,{id:"username",className:"mb-2",children:[Object(S.jsx)(se.a.Label,{children:"Username"}),Object(S.jsx)(se.a.Control,{type:"text",ref:n,required:!0})]}),Object(S.jsxs)(se.a.Group,{id:"email",className:"mb-2",children:[Object(S.jsx)(se.a.Label,{children:"Email"}),Object(S.jsx)(se.a.Control,{type:"email",ref:e,required:!0})]}),Object(S.jsxs)(se.a.Group,{id:"password",className:"mb-2",children:[Object(S.jsx)(se.a.Label,{children:"Password"}),Object(S.jsx)(se.a.Control,{type:"password",ref:t,required:!0})]}),Object(S.jsxs)(se.a.Group,{id:"confirm-password",className:"mb-4",children:[Object(S.jsx)(se.a.Label,{children:"Confirm Password"}),Object(S.jsx)(se.a.Control,{type:"password",ref:a,required:!0})]}),Object(S.jsxs)(f.a,{disabled:p,type:"submit",className:"w-100",children:[Object(S.jsx)("i",{className:"far fa-edit"})," Sign Up"]})]}),Object(S.jsx)("div",{className:"text-center mt-4",children:Object(S.jsxs)("p",{children:["Already have an account? ",Object(S.jsx)(h.b,{to:"/login",children:"Log in"})]})})]})})},ie=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=D().login,n=Object(O.g)(),s=Object(c.useState)(""),r=Object(x.a)(s,2),i=r[0],o=r[1],j=Object(c.useState)(!1),l=Object(x.a)(j,2),u=l[0],m=l[1],p=function(){var c=Object(b.a)(d.a.mark((function c(s){return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s.preventDefault(),c.prev=1,o(""),m(!0),c.next=6,a(e.current.value,t.current.value);case 6:n.push("/"),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),o("Failed to login.");case 12:m(!1);case 13:case"end":return c.stop()}}),c,null,[[1,9]])})));return function(e){return c.apply(this,arguments)}}();return Object(S.jsx)(E.a,{className:"shadow content-card card-2",children:Object(S.jsxs)(E.a.Body,{children:[Object(S.jsx)("p",{className:"mb-2 text-center text-title",children:"Login"}),i&&Object(S.jsx)(v.a,{variant:"danger",children:i}),Object(S.jsxs)(se.a,{children:[Object(S.jsxs)(se.a.Group,{id:"email",className:"mb-2",children:[Object(S.jsx)(se.a.Label,{children:"Email"}),Object(S.jsx)(se.a.Control,{type:"email",ref:e,required:!0})]}),Object(S.jsxs)(se.a.Group,{id:"password",className:"mb-2",children:[Object(S.jsx)(se.a.Label,{children:"Password"}),Object(S.jsx)(se.a.Control,{type:"password",ref:t,required:!0})]}),Object(S.jsx)(f.a,{disabled:u,type:"submit",className:"w-100 mt-4",onClick:p,children:"Login"})]}),Object(S.jsx)("div",{className:"mt-4 text-center",children:Object(S.jsxs)("p",{children:["Don't have an account? ",Object(S.jsx)(h.b,{to:"/signup",children:"Sign up"})]})})]})})},oe=a(146),je=function(e){Object(j.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(S.jsx)(I,{children:Object(S.jsxs)(h.a,{children:[Object(S.jsx)(B,{}),Object(S.jsx)(oe.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"calc(100vh - 225px",margin:"50px auto"},children:Object(S.jsx)(O.d,{children:Object(S.jsxs)(z,{children:[Object(S.jsx)(O.b,{path:"/",exact:!0,component:_}),Object(S.jsx)(O.b,{path:"/login",component:ie}),Object(S.jsx)(O.b,{path:"/signup",component:re}),Object(S.jsx)(ne,{path:"/game/:gameId",component:ae})]})})})]})})}}]),a}(n.a.Component);a(139);r.a.render(Object(S.jsx)(je,{}),document.getElementById("root"))}},[[140,1,2]]]);
//# sourceMappingURL=main.42cbb746.chunk.js.map